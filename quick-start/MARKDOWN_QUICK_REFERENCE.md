# ğŸ“ Markdown å¿«é€Ÿå‚è€ƒ

## åç«¯å¼€å‘è€…æŒ‡å—

å¦‚æœæ‚¨æ­£åœ¨å¼€å‘ NL2SQL çš„åç«¯å“åº”ï¼Œè¿™ä»½æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€ŸæŒæ¡ Markdown æ ¼å¼ã€‚

## ğŸ¯ æ¨èçš„å“åº”æ¨¡æ¿

### æ¨¡æ¿ 1ï¼šç®€å•æŸ¥è¯¢ç»“æœ

```markdown
æ ¹æ®æ‚¨çš„æŸ¥è¯¢ï¼Œæˆ‘æ‰¾åˆ°äº†ä»¥ä¸‹ç»“æœï¼š

**ç»Ÿè®¡ä¿¡æ¯ï¼š**
- æ€»æ•°ï¼š**{count}** æ¡è®°å½•
- æ—¶é—´èŒƒå›´ï¼š{start_date} è‡³ {end_date}

æ‰§è¡Œçš„ SQLï¼š
\`\`\`sql
{your_sql_query}
\`\`\`
```

### æ¨¡æ¿ 2ï¼šè¡¨æ ¼æ•°æ®å±•ç¤º

```markdown
### æŸ¥è¯¢ç»“æœ

| åˆ—å1 | åˆ—å2 | åˆ—å3 |
|------|------|------|
| å€¼1 | å€¼2 | å€¼3 |
| å€¼4 | å€¼5 | å€¼6 |

**æ•°æ®è¯´æ˜ï¼š**
1. è¯´æ˜é¡¹ 1
2. è¯´æ˜é¡¹ 2
```

### æ¨¡æ¿ 3ï¼šå®Œæ•´åˆ†ææŠ¥å‘Š

```markdown
# ğŸ“Š {æŸ¥è¯¢ä¸»é¢˜}

## 1. æ‰§è¡Œçš„æŸ¥è¯¢

\`\`\`sql
{your_sql_query}
\`\`\`

## 2. æŸ¥è¯¢ç»“æœ

{ç»“æœè¡¨æ ¼æˆ–åˆ—è¡¨}

## 3. æ•°æ®æ´å¯Ÿ

**ä¸»è¦å‘ç°ï¼š**
- ğŸ” å‘ç° 1
- ğŸ“ˆ å‘ç° 2
- ğŸ’¡ å‘ç° 3

> **æç¤ºï¼š** {é¢å¤–çš„è¯´æ˜æˆ–å»ºè®®}
```

## ğŸ”¤ å¸¸ç”¨ Markdown è¯­æ³•

### æ–‡æœ¬æ ¼å¼

| è¯­æ³• | æ•ˆæœ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| `**æ–‡æœ¬**` | **ç²—ä½“** | å¼ºè°ƒé‡è¦æ•°å­—ã€å…³é”®è¯ |
| `*æ–‡æœ¬*` | *æ–œä½“* | æ¬¡è¦å¼ºè°ƒ |
| `` `ä»£ç ` `` | `ä»£ç ` | è¡¨åã€å­—æ®µåã€å‡½æ•°å |

### æ ‡é¢˜å±‚çº§

```markdown
# ä¸€çº§æ ‡é¢˜ - ä¸»é¢˜
## äºŒçº§æ ‡é¢˜ - ç« èŠ‚
### ä¸‰çº§æ ‡é¢˜ - å°èŠ‚
```

**å»ºè®®ï¼š**
- ä¸€çº§æ ‡é¢˜ï¼šæŸ¥è¯¢ä¸»é¢˜
- äºŒçº§æ ‡é¢˜ï¼šä¸»è¦éƒ¨åˆ†ï¼ˆæŸ¥è¯¢ã€ç»“æœã€åˆ†æï¼‰
- ä¸‰çº§æ ‡é¢˜ï¼šç»†èŠ‚åˆ†ç±»

### åˆ—è¡¨

**æ— åºåˆ—è¡¨ï¼š**
```markdown
- é¡¹ç›® 1
- é¡¹ç›® 2
  - å­é¡¹ç›® 2.1
  - å­é¡¹ç›® 2.2
```

**æœ‰åºåˆ—è¡¨ï¼š**
```markdown
1. ç¬¬ä¸€æ­¥
2. ç¬¬äºŒæ­¥
3. ç¬¬ä¸‰æ­¥
```

### ä»£ç å—

**SQL ä»£ç ï¼š**
````markdown
```sql
SELECT column1, column2
FROM table_name
WHERE condition;
```
````

**Python ä»£ç ï¼š**
````markdown
```python
import pandas as pd
df = pd.read_sql(query, conn)
```
````

### è¡¨æ ¼

```markdown
| åˆ—1 | åˆ—2 | åˆ—3 |
|-----|-----|-----|
| A   | B   | C   |
| D   | E   | F   |
```

**å¯¹é½æ–¹å¼ï¼š**
```markdown
| å·¦å¯¹é½ | å±…ä¸­ | å³å¯¹é½ |
|:------|:----:|------:|
| æ–‡æœ¬  | æ–‡æœ¬ | æ–‡æœ¬  |
```

### å¼•ç”¨å’Œæç¤º

```markdown
> è¿™æ˜¯ä¸€æ®µå¼•ç”¨æ–‡æœ¬
> é€‚åˆç”¨äºæç¤ºã€è­¦å‘Šæˆ–è¡¥å……è¯´æ˜
```

### åˆ†éš”çº¿

```markdown
---
```

## ğŸ¨ è§†è§‰å¢å¼ºæŠ€å·§

### 1. ä½¿ç”¨ Emoji

```markdown
ğŸ“Š æ•°æ®ç»Ÿè®¡
ğŸ’¡ æç¤ºä¿¡æ¯
âš ï¸ è­¦å‘Šä¿¡æ¯
âœ… æˆåŠŸä¿¡æ¯
âŒ é”™è¯¯ä¿¡æ¯
ğŸ” è¯¦ç»†ä¿¡æ¯
ğŸ“ˆ è¶‹åŠ¿åˆ†æ
ğŸ’° é‡‘é¢ç›¸å…³
ğŸ‘¥ ç”¨æˆ·ç›¸å…³
ğŸ¢ éƒ¨é—¨/ç»„ç»‡
```

### 2. çªå‡ºå…³é”®æ•°å­—

```markdown
ç”¨æˆ·æ€»æ•°ï¼š**1,234** äºº
å¢é•¿ç‡ï¼š**+15.5%**
å¹³å‡å€¼ï¼š**Â¥12,345**
```

### 3. ç»“æ„åŒ–æ•°æ®

**å¥½çš„ç¤ºä¾‹ï¼š**
```markdown
### ç»Ÿè®¡æ‘˜è¦

| æŒ‡æ ‡ | æ•°å€¼ | å˜åŒ– |
|-----|------|------|
| æ€»ç”¨æˆ·æ•° | 1,234 | +5% |
| æ´»è·ƒç”¨æˆ· | 987 | +8% |
| æ–°å¢ç”¨æˆ· | 156 | +12% |
```

**ä¸å¥½çš„ç¤ºä¾‹ï¼š**
```
ç»Ÿè®¡æ‘˜è¦
æ€»ç”¨æˆ·æ•°: 1234, å˜åŒ–: +5%
æ´»è·ƒç”¨æˆ·: 987, å˜åŒ–: +8%
æ–°å¢ç”¨æˆ·: 156, å˜åŒ–: +12%
```

## ğŸ’» Java ä»£ç ç¤ºä¾‹

### æ„å»º Markdown å“åº”

```java
public String buildMarkdownResponse(QueryResult result) {
    StringBuilder md = new StringBuilder();
    
    // æ ‡é¢˜
    md.append("### æŸ¥è¯¢ç»“æœ\n\n");
    
    // SQL æŸ¥è¯¢
    md.append("æ‰§è¡Œçš„ SQLï¼š\n");
    md.append("```sql\n");
    md.append(result.getSql());
    md.append("\n```\n\n");
    
    // è¡¨æ ¼
    md.append("| åˆ—å | æ•°å€¼ |\n");
    md.append("|------|------|\n");
    for (Row row : result.getRows()) {
        md.append("| ").append(row.getName())
          .append(" | ").append(row.getValue())
          .append(" |\n");
    }
    
    // æ€»ç»“
    md.append("\n**æ€»è®¡ï¼š** ").append(result.getTotal()).append(" æ¡è®°å½•\n");
    
    return md.toString();
}
```

### ä½¿ç”¨æ¨¡æ¿å¼•æ“

```java
public String buildResponseWithTemplate(QueryResult result) {
    String template = """
        ### ğŸ“Š {title}
        
        **æŸ¥è¯¢æ—¶é—´ï¼š** {timestamp}
        
        ```sql
        {sql}
        ```
        
        **ç»“æœç»Ÿè®¡ï¼š**
        - æ€»è®°å½•æ•°ï¼š**{count}** æ¡
        - æŸ¥è¯¢è€—æ—¶ï¼š**{duration}** ms
        
        {table}
        
        > ğŸ’¡ **æç¤ºï¼š** {hint}
        """;
    
    return template
        .replace("{title}", result.getTitle())
        .replace("{timestamp}", result.getTimestamp())
        .replace("{sql}", result.getSql())
        .replace("{count}", String.valueOf(result.getCount()))
        .replace("{duration}", String.valueOf(result.getDuration()))
        .replace("{table}", buildMarkdownTable(result.getData()))
        .replace("{hint}", result.getHint());
}
```

## ğŸ¯ å®æˆ˜ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šç”¨æˆ·ç»Ÿè®¡æŸ¥è¯¢

**è¾“å…¥ï¼š** "ç»Ÿè®¡å„éƒ¨é—¨çš„ç”¨æˆ·æ•°é‡"

**æ¨èå“åº”ï¼š**
```markdown
### ğŸ‘¥ éƒ¨é—¨ç”¨æˆ·ç»Ÿè®¡

| éƒ¨é—¨åç§° | ç”¨æˆ·æ•°é‡ | å æ¯” |
|---------|---------|------|
| æŠ€æœ¯éƒ¨ | 156 | 45.2% |
| é”€å”®éƒ¨ | 89 | 25.8% |
| å¸‚åœºéƒ¨ | 67 | 19.4% |
| äººäº‹éƒ¨ | 33 | 9.6% |

**æ‰§è¡Œçš„ SQLï¼š**
```sql
SELECT 
    department_name,
    COUNT(*) as user_count,
    ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 1) as percentage
FROM users
GROUP BY department_name
ORDER BY user_count DESC;
```

**å…³é”®å‘ç°ï¼š**
- ğŸ† æŠ€æœ¯éƒ¨è§„æ¨¡æœ€å¤§ï¼Œå æ€»äººæ•°çš„ 45.2%
- ğŸ“Š å‰ä¸‰å¤§éƒ¨é—¨å æ¯”è¾¾ 90.4%
- ğŸ’¡ å»ºè®®ï¼šè€ƒè™‘ä¸ºæŠ€æœ¯éƒ¨è¿›è¡Œå›¢é˜Ÿç»†åˆ†
```

### ç¤ºä¾‹ 2ï¼šé”€å”®æ•°æ®åˆ†æ

**è¾“å…¥ï¼š** "æŸ¥è¯¢æœ¬æœˆé”€å”®é¢å‰10çš„äº§å“"

**æ¨èå“åº”ï¼š**
```markdown
# ğŸ“ˆ æœ¬æœˆé”€å”®TOP10äº§å“

## æŸ¥è¯¢ç»“æœ

| æ’å | äº§å“åç§° | é”€å”®é¢ | é”€é‡ | å¹³å‡å•ä»· |
|-----|---------|--------|------|---------|
| 1 | äº§å“A | Â¥125,000 | 250 | Â¥500 |
| 2 | äº§å“B | Â¥98,500 | 197 | Â¥500 |
| 3 | äº§å“C | Â¥87,300 | 291 | Â¥300 |

## SQL æŸ¥è¯¢

```sql
SELECT 
    product_name,
    SUM(amount) as total_sales,
    COUNT(*) as quantity,
    AVG(price) as avg_price
FROM orders
WHERE order_date >= DATE_FORMAT(NOW(), '%Y-%m-01')
GROUP BY product_id, product_name
ORDER BY total_sales DESC
LIMIT 10;
```

## æ•°æ®æ´å¯Ÿ

**é”€å”®ç‰¹ç‚¹ï¼š**
- ğŸ’° TOP3äº§å“è´¡çŒ®äº† **35%** çš„æ€»é”€å”®é¢
- ğŸ“Š å¹³å‡å®¢å•ä»·ï¼š**Â¥450**
- ğŸ”¥ æœ€ç•…é”€äº§å“ï¼šäº§å“Cï¼ˆ291ä»¶ï¼‰

> **å»ºè®®ï¼š** åŠ å¤§å¯¹TOPäº§å“çš„åº“å­˜å’Œè¥é”€æŠ•å…¥
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦

å¦‚æœå†…å®¹åŒ…å« Markdown ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦è½¬ä¹‰ï¼š

```java
String escaped = text
    .replace("*", "\\*")
    .replace("_", "\\_")
    .replace("`", "\\`")
    .replace("[", "\\[")
    .replace("]", "\\]");
```

### 2. ä»£ç å—ä¸­çš„åå¼•å·

ä½¿ç”¨å››ä¸ªåå¼•å·åŒ…è£¹åŒ…å«ä¸‰ä¸ªåå¼•å·çš„ä»£ç å—ï¼š

`````markdown
````markdown
```sql
SELECT * FROM users;
```
````
`````

### 3. è¡¨æ ¼å¯¹é½

ç¡®ä¿è¡¨æ ¼çš„åˆ†éš”è¡Œä¸åˆ—æ•°åŒ¹é…ï¼š

```markdown
| åˆ—1 | åˆ—2 | åˆ—3 |
|-----|-----|-----|  â† å¿…é¡»æœ‰3ä¸ªåˆ†éš”ç¬¦
| A   | B   | C   |
```

## ğŸ§ª æµ‹è¯•å·¥å…·

### åœ¨çº¿æµ‹è¯•
è®¿é—®æµ‹è¯•é¡µé¢æŸ¥çœ‹æ¸²æŸ“æ•ˆæœï¼š
```
http://localhost:8082/markdown-test.html
```

### æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æµ‹è¯•
const markdown = `
### æµ‹è¯•æ ‡é¢˜
- åˆ—è¡¨é¡¹ 1
- åˆ—è¡¨é¡¹ 2
`;
console.log(renderMarkdown(markdown));
```

## ğŸ“š æ›´å¤šèµ„æº

- [Markdown å®Œæ•´è¯­æ³•](https://www.markdownguide.org/)
- [GitHub Flavored Markdown](https://github.github.com/gfm/)
- [Marked.js æ–‡æ¡£](https://marked.js.org/)

---

**è®°ä½ï¼š** å¥½çš„ Markdown æ ¼å¼ = æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼
